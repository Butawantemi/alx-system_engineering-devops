#!/usr/bin/env bash

SCRIPT_NAME="manage_my_process"
PID_FILE="/var/run/my_process.pid"

# Function to start the script
start() {
  if [ -f "$PID_FILE" ]; then
    echo "$SCRIPT_NAME is already running (PID: $(cat $PID_FILE))"
  else
    nohup ./$SCRIPT_NAME > /dev/null 2>&1 &
    echo $! > $PID_FILE
    echo "$SCRIPT_NAME started"
  fi
}

# Function to stop the script
stop() {
  if [ -f "$PID_FILE" ]; then
    pid=$(cat $PID_FILE)
    kill "$pid"
    rm -f "$PID_FILE"
    echo "$SCRIPT_NAME stopped"
  else
    echo "$SCRIPT_NAME is not running"
  fi
}

# Function to restart the script
restart() {
  stop
  start
  echo "$SCRIPT_NAME restarted"
}

# Main script logic
case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
    restart
    ;;
  *)
    echo "Usage: $0 {start|stop|restart}"
    exit 1
    ;;
esac

